<!DOCTYPE html>
<html lang="en">

<head> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>MyKart</title>
</head>

<body>
    <div class="navbar">
        <a href="index.html">
            <div class="webname">MyKart</div>
        </a>
    </div>
    <!-- Category section -->
    <div class="category">
        <div class="category-head">
            Explore our categories
        </div>
        <div class="category-boxes">

        </div>
    </div>
    <!-- carousel -->
    <div class="carousel">
        <div class="carousel-content">
            <div class="carousel-item">
                <img src="./carousel/199_PC_3000._CB582039078_.jpg" alt="Image 1">
            </div>
            <div class="carousel-item">
                <img src="./carousel/3000x1200-heroH1._CB582036967_.jpg" alt="Image 2">
            </div>
            <div class="carousel-item">
                <img src="./carousel/Frame_386_3000pc._CB584585056_.jpg" alt="Image 3">
            </div>
        </div>
        <button class="carousel-btn prev-btn">&lt;</button>
        <button class="carousel-btn next-btn">&gt;</button>
    </div>
    <!-- MEN SECTION 3 PICS -->
    <div class="menwear">
        <div class="men-head">
            <div class="men-headname">
                Men Wear
            </div>
            <div class="men-viewmore">
                <a href="result.html?categoryId=1"><button>View More</button></a>
            </div>
        </div>
        <div class="men-boxes">
            <!-- <a href="result.html?categoryId=">
                <div class="men-box">
                    <div class="men-img">
                        <img src="" alt="">
                    </div>
                    <div class="men-name">

                    </div>
                </div>
            </a> -->
        </div>
    </div>
    <!-- WOMEN SECTION 3 PICS -->
    <div class="menwear">
        <div class="men-head">
            <div class="men-headname">
                Women Wear
            </div>
            <div class="men-viewmore">
                <a href="result.html?categoryId=2"><button>View More</button></a>
            </div>
        </div>
        <div class="women-boxes">
            <!-- <a href="result.html?categoryId=">
                <div class="men-box">
                    <div class="men-img">
                        <img src="" alt="">
                    </div>
                    <div class="men-name">

                    </div>
                </div>
            </a> -->
        </div>
    </div>
    <!-- KIDS SECTION 3 PICS -->
    <div class="menwear">
        <div class="men-head">
            <div class="men-headname">
                Kids Wear
            </div>
            <div class="men-viewmore">
                <a href="result.html?categoryId=3"><button>View More</button></a>
            </div>
        </div>
        <div class="kids-boxes">
            <!-- <a href="result.html?categoryId=">
                <div class="men-box">
                    <div class="men-img">
                        <img src="" alt="">
                    </div>
                    <div class="men-name">

                    </div>
                </div>
            </a> -->
        </div>
    </div>
    <!-- OTHER SECTION 3 PICS -->
    <div class="others">
        <!-- MOBILE -->
        <div class="non-wear">
            <div class="men-head">
                <div class="men-headname">
                    Mobiles
                </div>
                <div class="men-viewmore">
                    <a href="result.html?categoryId=34"><button>View More</button></a>
                </div>
            </div>
            <div class="mobile-boxes">
                <!-- <a href="result.html?categoryId=34">
                    <div class="men-box">
                        <div class="men-img">
                            <img src="" alt="">
                        </div>
                        <div class="men-name">

                        </div>
                    </div>
                </a> -->
            </div>
        </div>
        <!-- ELECTRONICS -->
        <div class=" non-wear">
            <div class="men-head">
                <div class="men-headname">
                    Electronic Section
                </div>
                <div class="men-viewmore">
                    <a href="result.html?categoryId=31"><button>View More</button></a>
                </div>
            </div>
            <div class="electronic-boxes">
                <!-- <a href="result.html?categoryId=">
                    <div class="men-box">
                        <div class="men-img">
                            <img src="" alt="">
                        </div>
                        <div class="men-name">

                        </div>
                    </div>
                </a> -->
            </div>
        </div>
    </div>
    <!-- ====================================================== -->
    <div class="others">
        <!-- GROCERY -->
        <div class="non-wear">
            <div class="men-head">
                <div class="men-headname">
                    Grocery
                </div>
                <div class="grocery-viewmore">
                    <a href="result.html?categoryId=33"><button>View More</button></a>
                </div>
            </div>
            <div class="grocery-boxes">
                <!-- <a href="result.html?categoryId=34">
                    <div class="men-box">
                        <div class="men-img">
                            <img src="" alt="">
                        </div>
                        <div class="men-name">

                        </div>
                    </div>
                </a> -->
            </div>
        </div>
        <!-- HOME & FURNITURE -->
        <div class=" non-wear">
            <div class="men-head">
                <div class="men-headname">
                    Home and Furniture
                </div>
                <div class="men-viewmore">
                    <a href="result.html?categoryId=32"><button>View More</button></a>
                </div>
            </div>
            <div class="home-boxes">
                <!-- <a href="result.html?categoryId=">
                    <div class="men-box">
                        <div class="men-img">
                            <img src="" alt="">
                        </div>
                        <div class="men-name">

                        </div>
                    </div>
                </a> -->
            </div>
        </div>
    </div>

    <!-- ========================= -->
    <!-- SCRIPT SECTION START HERE -->
    <!-- ========================= -->

    <script>
        $(document).ready(function () {

            // ====================
            // CAROUSEL CODE
            // ====================

            const carousel = $('.carousel');
            const carouselContent = $('.carousel-content');
            const carouselItems = $('.carousel-item');
            const prevBtn = $('.prev-btn');
            const nextBtn = $('.next-btn');

            let currentIndex = 0;
            const totalItems = carouselItems.length;

            function showItem(index) {
                if (index < 0 || index >= totalItems) {
                    return;
                }
                currentIndex = index;
                const offset = -currentIndex * carousel.width();
                carouselContent.css('transform', `translateX(${offset}px)`);
            }

            // Automatic sliding effect
            setInterval(() => {
                currentIndex = (currentIndex + 1) % totalItems;
                showItem(currentIndex);
            }, 3000);

            // Previous button click handler
            prevBtn.on('click', function () {
                currentIndex = (currentIndex - 1 + totalItems) % totalItems;
                showItem(currentIndex);
            });

            // Next button click handler
            nextBtn.on('click', function () {
                currentIndex = (currentIndex + 1) % totalItems;
                showItem(currentIndex);
            });

            // ================================================================================
            // FETCH THE DATAS FOR CATEGORIES
            // ================================================================================
            $.getJSON('ecomm.json', function (data) {
                var item = '';
                for (var i = 0; i < data.length; i++) {
                    if (data[i].parent_id == 0) {
                        item += '<a href="result.html?categoryId=' + data[i].id + '&cate=' + data[i].cate + '" id="an"><div class="category-box">\
                <div class="category-img">\
                    <img src="' + data[i].Image + '" alt="image">\
                </div>\
                <div class="category-name">'
                            + data[i].Name +
                            '</div>\
            </div></a>';
                    }
                }
                $(".category-boxes").append(item);
            });

            // =====================================================================================
            // MEN WEAR DATA WILL COME HERE ONLY 3 OR 4
            // =====================================================================================
            $.getJSON('ecomm.json', function (data) {

                var items = {
                    1: '',
                    2: '',
                    3: '',
                    31: ' ',
                    32: '',
                    33: '',
                    34: ''
                };
                var counter = {
                    1: 0,
                    2: 0,
                    3: 0,
                    31: 0,
                    32: 0,
                    33: 0,
                    34: 0
                };

                for (var i = 0; i < data.length; i++) {
                    console.log(data[i].id);
                    var parent_id = data[i].parent_id;

                    if (parent_id == 1 || parent_id == 2 || parent_id == 3 || parent_id == 31 || parent_id == 32 || parent_id == 33 || parent_id == 34) {
                        counter[parent_id]++;
                        var currentItem = 'item' + parent_id;
                        if (counter[parent_id] <= 4) {
                            items[parent_id] += '<a href="result.html?categoryId=' + parent_id + '">\
                <div class="men-box">\
                    <div class="men-img">\
                        <img src="' + data[i].Image + '" alt="' + data[i].Name + '">\
                    </div>\
                    <div class="men-name">' + data[i].Name + '</div>\
                </div>\
            </a>';
                        }
                    }
                }

                $('.men-boxes').append(items[1]);
                $('.women-boxes').append(items[2]);
                $('.kids-boxes').append(items[3]);
                $('.electronic-boxes').append(items[31]);
                $('.home-boxes').append(items[32]);
                $('.grocery-boxes').append(items[33]);
                $('.mobile-boxes').append(items[34]);
            });



        });
    </script>
</body>

</html>